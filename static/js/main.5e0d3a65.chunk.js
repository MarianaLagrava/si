(this.webpackJsonpmyapp=this.webpackJsonpmyapp||[]).push([[0],{40:function(e,t,r){},71:function(e,t,r){"use strict";r.r(t);var n=r(2),a=r.n(n),s=r(33),c=r.n(s),o=(r(40),r(3)),l=r.n(o),i=r(6),u=r(5),d=r(35),j="https://posts-pw2021.herokuapp.com/api/v1",x={};x.login=function(){var e=Object(i.a)(l.a.mark((function e(t,r){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(j,"/auth/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:r})});case 2:if(!(n=e.sent).ok){e.next=8;break}return e.next=6,n.json();case 6:return a=e.sent,e.abrupt("return",a);case 8:return e.abrupt("return",{});case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),x.verifyToken=function(){var e=Object(i.a)(l.a.mark((function e(t){var r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(j,"/auth/whoami"),{headers:{Authorization:"Bearer ".concat(t)}});case 2:if(!(r=e.sent).ok){e.next=8;break}return e.next=6,r.json();case 6:return n=e.sent,e.abrupt("return",n);case 8:return e.abrupt("return",{});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var b=x,p=r(1),f=a.a.createContext(),h="token",m=function(e){var t=Object(n.useState)(void 0),r=Object(u.a)(t,2),a=r[0],s=r[1],c=Object(n.useState)(void 0),o=Object(u.a)(c,2),j=o[0],x=o[1],m=function(e){localStorage.setItem(h,e),s(e)};Object(n.useEffect)((function(){!function(){if(void 0!==j){var e=j;localStorage.setItem("user",JSON.stringify(e))}}()}),[j]),Object(n.useEffect)((function(){var e=function(){var e=Object(i.a)(l.a.mark((function e(){var t,r,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=localStorage.getItem(h))){e.next=8;break}return e.next=4,b.verifyToken(t);case 4:r=e.sent,n=r.username,a=r.role,n&&a&&(x({username:n,role:a}),m(t));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[a]);var g=Object(n.useCallback)((function(e,t){var r=function(){var r=Object(i.a)(l.a.mark((function r(){var n,a,s;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=!1,r.prev=1,r.next=4,b.login(e,t);case 4:a=r.sent,(s=a.token)&&(m(s),n=!0),r.next=13;break;case 9:r.prev=9,r.t0=r.catch(1),console.log(r.t0),console.log("No se pudo iniciar sesi\xf3n");case 13:return r.prev=13,r.abrupt("return",n);case 16:case"end":return r.stop()}}),r,null,[[1,9,13,16]])})));return function(){return r.apply(this,arguments)}}();return r()}),[]),v=Object(n.useCallback)((function(){x(void 0),m(void 0),localStorage.setItem("user",void 0)}),[]),O=Object(n.useMemo)((function(){return{token:a,user:j,login:g,logout:v}}),[a,j,g,v]);return Object(p.jsx)(f.Provider,Object(d.a)({value:O},e))},g=function(){var e=a.a.useContext(f);if(!e)throw new Error("Ha ocurrido un error");return e},v=r(4),O=r.p+"static/media/usuario.647979d8.png",w=r(15),k=r(8),y=r.n(k),N=function(){var e=Object(v.g)(),t=g(),r=t.login,a=t.token,s=Object(n.useState)(""),c=Object(u.a)(s,2),o=c[0],d=c[1],j=Object(n.useState)(""),x=Object(u.a)(j,2),b=x[0],f=x[1],h=Object(n.useState)(!1),m=Object(u.a)(h,2),k=m[0],N=m[1],A=function(e,t){t(e.target.value)},S=function(){var e=Object(i.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,r(o,b);case 3:n=e.sent,N(!n),k&&y.a.fire({title:"Usuario o contrase\xf1a no validos",icon:"warning",confirmButtonColor:"#3085d6",confirmButtonText:"Volver"}),d(""),f("");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){a&&e("/redirect")}),[a,e]),Object(p.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-dark-700",children:Object(p.jsx)("main",{children:Object(p.jsxs)("div",{className:"flex lg:flex-row gap-10 p-10 m-6  rounded-xl flex-col",children:[Object(p.jsx)("img",{className:"pl-3 w-2/4",src:O,alt:"login-img"}),Object(p.jsxs)("form",{className:"flex flex-col gap-10 p-10 m-2 bg-dark-400 w-11/12 rounded-3xl",onSubmit:S,children:[Object(p.jsx)("h1",{className:"font-bold self-center font-content text-5xl text-aqua",children:"Log in "}),Object(p.jsx)("input",{className:"p-2 rounded hover:border-skyD focus:outline-skyBO ",title:"Username",type:"text",placeholder:"Ingrese su username",onChange:function(e){return A(e,d)},value:o}),Object(p.jsx)("input",{className:"p-2 rounded hover:border-skyD focus:outline-skyBO ",title:"Password",type:"password",placeholder:"Ingrese su contrase\xf1a",onChange:function(e){return A(e,f)},value:b}),Object(p.jsxs)("div",{className:"flex flex-row gap-5",children:[Object(p.jsx)(w.a,{className:"text-5xl text-skyL"}),Object(p.jsx)("button",{className:"w-3/4 bg-blue-500 hover:bg-blue-400 text-white font-bold py-2 px-4 border-blue-700 hover:border-blue-500 rounded",children:"Ingresar"})]})]})]})})})},A=r(11),S=r(16),C=r.n(S),I=r(13),L=r(12),P=r(7),q="https://posts-pw2021.herokuapp.com/api/v1",D=function(){var e=Object(v.g)(),t=Object(n.useRef)(null),r=Object(n.useRef)(null),a=Object(n.useRef)(null);function s(){return(s=Object(i.a)(l.a.mark((function n(s){var c,o,i,u,d;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s.preventDefault(),c=t.current.value,o=r.current.value,i=a.current.value,""===c||""===o||o.lengh||""===i?y.a.fire({icon:"error",title:"ERROR",text:"Por favor llenar todos los campos"}):o.length<8&&y.a.fire({icon:"warning",title:"ERROR",text:"La descripcion del post debe ser mayor a 8 caracteres"}),n.prev=5,n.next=8,C.a.post("".concat(q,"/post/create"),{title:c,description:o,image:i},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}});case 8:u=n.sent,y.a.fire({icon:"success",title:"Creado",text:"Post publicado con exito"}),200===u.status&&(localStorage.getItem("token",u.data.token),e("/admin")),n.next=17;break;case 13:n.prev=13,n.t0=n.catch(5),401===(d=n.t0.response).status?y.a.fire({icon:"error",title:"ERROR",text:"Debes ser admin para crear un post"}):404===d.status&&y.a.fire({icon:"error",title:"ERROR",text:"No se pudo crear el post"});case 17:t.current.value="",r.current.value="",a.current.value="";case 20:case"end":return n.stop()}}),n,null,[[5,13]])})))).apply(this,arguments)}return Object(p.jsxs)("div",{className:"bg-dark-400",children:[Object(p.jsx)("div",{className:"relative pt-1 bg-gradient-to-r from-aqua to-skyD"}),Object(p.jsxs)("button",{onClick:function(t){t.preventDefault(),e("/CardContainer")},className:"px-4 py-2 mx-3 mt-6 text-white transform bg-dark-700 x-2 hover:scale-105 hover:text-dark-700 hover:bg-white motion-reduce:transform-none rounded-2xl ",children:[Object(p.jsx)(P.e,{className:"inline "})," ver los posts "]}),Object(p.jsx)("div",{className:"flex flex-col items-center min-h-screen pt-20 bg-dark-400",children:Object(p.jsx)("main",{children:Object(p.jsx)("div",{className:"w-full max-w-3xl p-2 rounded-md shadow-md border-1 md:p-2 bg-gradient-to-r from-aqua to-skyD text-bold hover:text-black",children:Object(p.jsxs)("form",{onSubmit:function(e){return s.apply(this,arguments)},className:"flex flex-col items-center justify-center gap-4 p-10 bg-skyL",children:[Object(p.jsx)("h2",{className:"mb-4 text-4xl font-black text-gray-800 font-heading",children:"Crea un POST"}),Object(p.jsxs)("div",{class:"flex",children:[Object(p.jsx)("span",{class:"text-lg  rounded-l px-4 py-2 bg-gray",children:Object(p.jsx)(I.b,{})}),Object(p.jsx)("input",{autocomplete:"false",className:"w-full px-4 py-2 rounded-r focus:outline-none focus:ring-2 focus:ring-aqua focus:border-transparent",type:"text",placeholder:"T\xedtulo",ref:t})]}),Object(p.jsxs)("div",{class:"flex",children:[Object(p.jsx)("span",{class:"text-lg   rounded-l px-4 py-2 bg-gray",children:Object(p.jsx)(w.b,{})}),Object(p.jsx)("input",{autocomplete:"false",className:"w-full px-4 py-2 rounded-r focus:outline-none focus:ring-2 focus:ring-aqua focus:border-transparent",type:"text",placeholder:"Descripci\xf3n",ref:r})]}),Object(p.jsxs)("div",{class:"flex",children:[Object(p.jsx)("span",{class:"text-lg  rounded-l px-4 py-2 bg-gray",children:Object(p.jsx)(L.b,{})}),Object(p.jsx)("input",{autocomplete:"false",className:"w-full px-4 py-2 rounded-r focus:outline-none focus:ring-2 focus:ring-aqua focus:border-transparent",type:"text",placeholder:"Url de la imagen",ref:a})]}),Object(p.jsx)("button",{className:"w-full px-4 py-2 mt-6 text-xl text-white uppercase transition duration-300 ease-in-out border rounded bg-gradient-to-r from-aqua to-skyD text-bold hover:text-black",children:"Publicar"})]})})})})]})},B=function(e){var t=e.role,r=e.children,n=g(),a=n.token,s=n.user;return console.log(a),a?s&&s.role===t?r:Object(p.jsx)(v.a,{replace:!0,to:"/ErrorPage"}):(console.log("BUM"),Object(p.jsx)(v.a,{replace:!0,to:"/login"}))},R={admin:"/AdminMain",user:"/UserMain"},J=function(){var e,t=g().user;return t?Object(p.jsx)(v.a,{replace:!0,to:null!==(e=R[t.role])&&void 0!==e?e:"/"}):Object(p.jsx)("h1",{children:"Error"})},z=r(34),E=function(e){var t=e.comment;e.post;return Object(p.jsxs)("div",{className:"flex gap-3 mb-4",children:[Object(p.jsx)("div",{className:"flex items-center justify-center w-12 rounded-full bg-gradient-to-r from-skyD to-aqua",children:Object(p.jsx)("div",{className:"flex items-center justify-center w-5/6 bg-white rounded-full h-5/6",children:Object(p.jsx)("h3",{className:"font-bold",children:t.user.username.split("_")[0]})})}),Object(p.jsxs)("div",{className:"w-full pl-2 bg-gray-300 rounded-md",children:[Object(p.jsx)("p",{className:"font-bold",children:t.user.username}),Object(p.jsx)("p",{children:t.description})]})]})},Q=function(e){var t=e.post,r=e.favs,a=Object(v.g)(),s=Object(n.useState)(null),c=Object(u.a)(s,2),o=c[0],d=c[1],j=Object(n.useState)(null),x=Object(u.a)(j,2),b=x[0],f=x[1],h=Object(n.useState)(null),m=Object(u.a)(h,2),g=m[0],O=m[1],w=Object(n.useState)(t.likes.length),k=Object(u.a)(w,2),N=k[0],A=k[1],S=Object(n.useState)(t.comments),q=Object(u.a)(S,2),D=q[0],B=q[1],R=JSON.parse(localStorage.getItem("user")).username,J=Object(n.useRef)(null);Object(n.useEffect)((function(){t.likes.forEach((function(e){e.username===R?d(!0):d(!1)})),r.forEach((function(e){e===t._id&&O(!0)}))}),[]);var Q=function(){var e=Object(i.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://posts-pw2021.herokuapp.com/api/v1/post/like/"+t._id,{method:"PATCH",headers:{Authorization:"Bearer "+localStorage.getItem("token")}});case 3:e.sent,o?(d(!1),A(N-1)):(d(!0),A(N+1)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){var e=document.querySelector('[data-id="'.concat(t._id,'"]'));o?e.classList.add("text-red-500"):e.classList.remove("text-red-500")}),[o]);var T=function(){var e=Object(i.a)(l.a.mark((function e(){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://posts-pw2021.herokuapp.com/api/v1/post/toggle/"+t._id,{method:"PATCH",headers:{Authorization:"Bearer "+localStorage.getItem("token")}});case 3:e.sent,r=document.querySelector('[data-hide="'.concat(t._id,'"]')),b?(f(!1),r.classList.remove("text-red-500")):(f(!0),r.classList.add("text-red-500")),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();function U(){return(U=Object(i.a)(l.a.mark((function e(r){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),!((n=J.current.value).length<8)){e.next=7;break}y.a.fire({icon:"error",title:"ERROR",text:"Comentario debe tener al menos 8 caracteres"}),J.current.value="",e.next=18;break;case 7:return e.prev=7,e.next=10,C.a.patch("https://posts-pw2021.herokuapp.com/api/v1/post/comment/".concat(t._id),{description:n},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}});case 10:a={description:n,user:{username:R},_id:t._id},B([].concat(Object(z.a)(D),[a])),J.current.value="",e.next=18;break;case 15:e.prev=15,e.t0=e.catch(7),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[7,15]])})))).apply(this,arguments)}var G=function(){var e=Object(i.a)(l.a.mark((function e(){var r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://posts-pw2021.herokuapp.com/api/v1/post/fav/"+t._id,{method:"PATCH",headers:{Authorization:"Bearer "+localStorage.getItem("token")}});case 3:return r=e.sent,e.next=6,r.json();case 6:n=e.sent,console.log(n),O(!g),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){var e=document.querySelector('[data-fid="'.concat(t._id,'"]'));g?e.classList.add("text-yellow-700"):e.classList.remove("text-yellow-700")}),[g]);return Object(p.jsxs)("div",{className:"flex flex-col mb-12 bg-white rounded shadow-lg lg:flex-row lg:h-98",children:[Object(p.jsxs)("div",{className:"relative flex flex-col items-center justify-center bg-gray-300 rounded-l lg:w-2/4",children:[Object(p.jsx)("img",{loading:"lazy",src:t.image,className:"w-full rounded-l lg:w-auto lg:h-full",alt:t.title}),Object(p.jsx)("div",{className:"bottom-0 hidden w-full h-auto py-2 pl-3 font-bold text-white lg:absolute lg:flex lg:flex-col lg:justify-center bg-dark-700 bg-opacity-70 max-h-28",children:Object(p.jsxs)("div",{className:"overflow-y-auto",children:[Object(p.jsx)("p",{children:t.user.username}),Object(p.jsx)("p",{className:"font-light",children:t.description})]})})]}),Object(p.jsxs)("div",{className:"flex flex-col gap-4 m-5 lg:w-2/4 font-content",children:[Object(p.jsxs)("div",{className:"flex gap-2",children:[Object(p.jsx)("h2",{className:"text-2xl font-bold font",children:t.title}),Object(p.jsxs)("button",{"data-fid":t._id,onClick:G,className:"w-5 text-xl text-gray-500",children:[Object(p.jsx)(P.d,{className:"hover:text-yellow-700"})," "]}),JSON.parse(localStorage.getItem("user")).username===t.user.username?Object(p.jsxs)("button",{className:"flex items-center justify-center h-12 gap-3 hover:text-aqua lg:w-1/7 lg:h-auto",onClick:function(e){e.preventDefault(),a("/UpdatePost"),localStorage.setItem("post",JSON.stringify(t._id)),localStorage.setItem("title",JSON.stringify(t.title)),localStorage.setItem("description",JSON.stringify(t.description)),localStorage.setItem("image",JSON.stringify(t.image))},children:[" ",Object(p.jsx)(L.c,{})]}):Object(p.jsxs)("button",{className:"hidden",children:[" ",Object(p.jsx)(L.c,{})]}),JSON.parse(localStorage.getItem("user")).username===t.user.username?Object(p.jsxs)("button",{"data-hiden":t._id,className:"flex items-center justify-center h-12 gap-3 hover:text-red-500 lg:w-1/7 lg:h-auto",onClick:T,children:[" ",Object(p.jsx)(I.a,{className:"w-5 h-5"})]}):Object(p.jsxs)("button",{className:"hidden",children:[" ",Object(p.jsx)(I.a,{})]})]}),Object(p.jsxs)("div",{className:"flex items-center gap-3 text-dark-400",children:[Object(p.jsx)(L.a,{}),Object(p.jsxs)("span",{children:[new Date(t.createdAt).toLocaleDateString()," - "]}),Object(p.jsx)("span",{className:"text-dark-400",children:new Date(t.createdAt).toLocaleTimeString()})]}),Object(p.jsx)("div",{className:"w-full h-auto overflow-y-auto lg:hidden max-h-16",children:Object(p.jsxs)("p",{className:"font-light",children:[Object(p.jsxs)("span",{className:"font-bold",children:[" ",t.user.username," - \xa0 "]}),t.description]})}),Object(p.jsxs)("div",{className:"flex gap-3 text-gray-500",children:[Object(p.jsxs)("button",{"data-id":t._id,className:"w-5 text-xl ",onClick:Q,children:[Object(p.jsx)(P.c,{className:" hover:text-red-500"})," "]}),Object(p.jsxs)("a",{id:"btnBUM",href:"#",className:"text-lg text-blue-500 underline hover:text-blue-400",onClick:function(){y.a.fire({title:"Likes",imageUrl:"https://getyourcompliments.com/icon.png",imageWidth:150,imageHeight:150,text:"Personas a las que le has gustado esta publicacion: ".concat(t.likes.map((function(e){return e.username})).join(" || "))})},children:[" ",N," me gusta"]})]}),Object(p.jsxs)("form",{onSubmit:function(e){return U.apply(this,arguments)},children:[Object(p.jsx)("p",{children:"A\xf1adir comentario:"}),Object(p.jsx)("input",{className:"w-full h-16 p-1 bg-gray-300 rounded-md resize-none focus:outline-none",placeholder:"Escribe tu comentario... ",type:"text",ref:J})]}),Object(p.jsx)("p",{children:"Comentarios:"}),Object(p.jsx)("div",{id:"comments",className:"overflow-y-auto max-h-60",children:D.length>0?D.map((function(e){return Object(p.jsx)(E,{comment:e},e._id)})):Object(p.jsx)("p",{className:"text-red-500",children:"Esta publicaci\xf3n no tiene comentarios..."})})]})]})},T="data:image/png;base64,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",U=r(18),G=function(){var e=Object(v.g)(),t=JSON.parse(localStorage.getItem("user")).role,r={enter:function(){var e=document.querySelector("#drop");e.classList.add("flex","flex-col"),e.classList.remove("hidden")},leave:function(){var e=document.querySelector("#drop");e.classList.add("hidden"),e.classList.remove("flex","flex-col")}},n=g(),a=function(t){t.preventDefault(),e("/CreatePost")};return Object(p.jsx)("div",{className:"relative pt-1 bg-gradient-to-r from-aqua to-skyD",children:Object(p.jsxs)("div",{id:"divnav",className:"static flex items-center justify-around text-white shadow-lg bg-dark-700 h-14",children:[Object(p.jsx)("h1",{className:"text-4xl font-heading lg:w-1/4 lg:text-center",children:"Web social"}),Object(p.jsx)("div",{className:"lg:hidden",children:Object(p.jsx)("button",{onClick:function(){var e=document.querySelector("#divnav"),t=document.querySelector("nav");t.classList.contains("hidden")?(t.classList.add("flex","flex-col","gap-2","mb-3","w-full"),t.classList.remove("hidden"),e.classList.remove("gap-6","h-14"),e.classList.add("flex-col","gap-4","pt-2")):(t.classList.remove("flex","flex-col","gap-2","mb-3","w-full"),t.classList.add("hidden"),e.classList.add("gap-6","h-14"),e.classList.remove("flex-col","gap-4","pt-2"))},className:"flex items-center px-3 py-2 border rounded hover:text-white hover:border-white",children:Object(p.jsxs)("svg",{className:"w-3 h-3 fill-current",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:[Object(p.jsx)("title",{children:"Menu"}),Object(p.jsx)("path",{d:"M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"})]})})}),Object(p.jsxs)("nav",{className:"hidden h-full text-gray-500 lg:w-2/3 lg:flex lg:justify-end font-content",children:["user"===t?Object(p.jsxs)("button",{onClick:a,className:"hidden h-12 gap-3 hover:bg-dark-400 hover:text-white lg:w-1/4 lg:h-auto",children:[" ",Object(p.jsx)(U.a,{})," Crear un post"]}):Object(p.jsxs)("button",{onClick:a,className:"flex items-center justify-center h-12 gap-3 hover:bg-dark-400 hover:text-white lg:w-1/4 lg:h-auto",children:[" ",Object(p.jsx)(U.a,{})," Crear un post"]}),Object(p.jsxs)("button",{className:"flex items-center justify-center h-12 gap-3 hover:bg-dark-400 hover:text-white lg:w-1/4 lg:h-auto",onClick:function(t){t.preventDefault(),e("/CardContainer")},children:[" ",Object(p.jsx)(U.b,{})," Publicaciones"]}),"admin"===t?Object(p.jsxs)("button",{className:"flex items-center justify-center h-12 gap-3 hover:bg-dark-400 hover:text-white lg:w-1/4 lg:h-auto",onClick:function(t){t.preventDefault(),e("/MyPosts")},children:[" ",Object(p.jsx)(P.b,{})," Mis Posts"]}):Object(p.jsxs)("button",{className:"hidden",children:[" ",Object(p.jsx)(P.b,{})," Mis Posts"]}),Object(p.jsxs)("button",{className:"flex items-center justify-center h-12 gap-3 hover:bg-dark-400 hover:text-white lg:w-1/4 lg:h-auto",onClick:function(t){t.preventDefault(),e("/MyFavorites")},children:[" ",Object(p.jsx)(P.g,{})," Favoritos"]}),Object(p.jsxs)("button",{className:"flex items-center justify-center h-12 gap-3 hover:bg-dark-400 hover:text-white lg:w-1/4 lg:h-auto",onMouseEnter:r.enter,onMouseLeave:r.leave,children:[" ",Object(p.jsx)("img",{src:T,className:"w-8 h-8 rounded-full",alt:"avatar-user"})," Usuario ",Object(p.jsx)(P.a,{})]})]}),Object(p.jsxs)("div",{id:"drop",className:"absolute z-10 items-center hidden w-64 py-2 bg-white rounded-lg shadow-xl top-80 lg:top-14 lg:right-2 font-content",onMouseEnter:r.enter,onMouseLeave:r.leave,children:[Object(p.jsxs)("div",{className:"flex justify-between gap-5 mx-6",children:[Object(p.jsx)("img",{src:T,className:"w-1/4 rounded-full",alt:"user-img"}),Object(p.jsxs)("div",{className:"w-3/4",children:[Object(p.jsx)("h2",{className:"font-bold text-dark-700",children:JSON.parse(localStorage.getItem("user")).username}),Object(p.jsx)("h2",{className:"text-dark-700",children:JSON.parse(localStorage.getItem("user")).role})]})]}),Object(p.jsx)("button",{className:"w-11/12 px-4 py-2 mt-4 text-gray-500 bg-red-500 rounded hover:bg-red-300 hover:text-white",onClick:function(t){t.preventDefault(),n.logout(),e("/login")},children:"Logout"})]})]})})},X=function(){var e=localStorage.getItem("token"),t=Object(n.useState)([]),r=Object(u.a)(t,2),a=r[0],s=r[1],c=Object(n.useState)([]),o=Object(u.a)(c,2),d=o[0],j=o[1],x=Object(n.useState)(0),b=Object(u.a)(x,2),f=b[0],h=b[1],m=Object(n.useState)(1),g=Object(u.a)(m,2),O=g[0],w=g[1];Object(v.g)();return Object(n.useEffect)((function(){var t=function(){var t=Object(i.a)(l.a.mark((function t(){var r,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://posts-pw2021.herokuapp.com/api/v1/post/all?limit=20&page=".concat(f),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}});case 3:if(!(r=t.sent).ok){t.next=10;break}return t.next=7,r.json();case 7:n=t.sent,w(n.pages),s(n.data);case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.error(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}(),r=function(){var e=Object(i.a)(l.a.mark((function e(){var t,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://posts-pw2021.herokuapp.com/api/v1/post/fav",{method:"GET",headers:{Authorization:"Bearer "+localStorage.getItem("token")}});case 3:if(!(t=e.sent).ok){e.next=9;break}return e.next=7,t.json();case 7:r=e.sent,j(r.favorites);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();t(),r()}),[f]),f==O&&y.a.fire({title:"Has llegado al final de los post",icon:"warning",confirmButtonColor:"#3085d6",confirmButtonText:"Volver"}).then((function(e){e.isConfirmed&&h(f-1)})),console.log(f,O),f<0&&y.a.fire({title:"Parece que no hay posts por mostrar",icon:"warning",confirmButtonColor:"#3085d6",confirmButtonText:"Volver"}).then((function(e){e.isConfirmed&&h(f+1)})),Object(p.jsxs)("div",{className:"min-h-screen bg-dark-400",children:[Object(p.jsx)(G,{}),Object(p.jsx)("div",{className:"flex justify-center",children:Object(p.jsxs)("div",{className:"w-11/12 mt-11",children:[Object(p.jsxs)("div",{className:"flex flex-col gap-3 mb-5 lg:gap-0 lg:flex-row lg:justify-between",children:[Object(p.jsxs)("button",{onClick:function(){h(f-1)},className:"flex items-center justify-center px-4 py-1 mx-3 text-white transform bg-dark-700 x-2 hover:scale-105 hover:text-dark-700 hover:bg-white motion-reduce:transform-none rounded-2xl ",children:[Object(p.jsx)(P.e,{className:"inline "})," ",Object(p.jsx)("div",{children:"P\xe1gina anterior"})," "]}),Object(p.jsxs)("button",{onClick:function(){h(f+1)},className:"flex items-center justify-center px-4 py-1 mx-3 text-white transform bg-dark-700 x-2 hover:scale-105 hover:text-dark-700 hover:bg-white motion-reduce:transform-none rounded-2xl ",children:[" ",Object(p.jsx)("div",{children:"P\xe1gina siguiente"})," ",Object(p.jsx)(P.f,{className:"inline "})," "]})]}),a.length>0?a.map((function(e){return Object(p.jsx)(Q,{post:e,favs:d},e._id)})):null,Object(p.jsxs)("div",{className:"flex flex-col gap-3 mb-10 lg:gap-0 lg:flex-row lg:justify-between",children:[Object(p.jsxs)("button",{onClick:function(){h(f-1)},className:"flex items-center justify-center px-4 py-1 mx-3 text-white transform bg-dark-700 x-2 hover:scale-105 hover:text-dark-700 hover:bg-white motion-reduce:transform-none rounded-2xl ",children:[Object(p.jsx)(P.e,{className:"inline "})," ",Object(p.jsx)("div",{children:"P\xe1gina anterior"})," "]}),Object(p.jsxs)("button",{onClick:function(){h(f+1)},className:"flex items-center justify-center px-4 py-1 mx-3 text-white transform bg-dark-700 x-2 hover:scale-105 hover:text-dark-700 hover:bg-white motion-reduce:transform-none rounded-2xl ",children:[" ",Object(p.jsx)("div",{children:"P\xe1gina siguiente"})," ",Object(p.jsx)(P.f,{className:"inline "})," "]})]})]})}),Object(p.jsx)("div",{className:"relative pt-1 bg-gradient-to-r from-aqua to-skyD"})]})},K=function(){var e=localStorage.getItem("token"),t=Object(n.useState)([]),r=Object(u.a)(t,2),a=r[0],s=r[1],c=Object(n.useState)([]),o=Object(u.a)(c,2),d=o[0],j=o[1],x=Object(n.useState)(0),b=Object(u.a)(x,2);b[0],b[1];return Object(n.useEffect)((function(){var e=function(){var e=Object(i.a)(l.a.mark((function e(){var t,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://posts-pw2021.herokuapp.com/api/v1/post/fav",{method:"GET",headers:{Authorization:"Bearer "+localStorage.getItem("token")}});case 3:if(!(t=e.sent).ok){e.next=9;break}return e.next=7,t.json();case 7:r=e.sent,j(r.favorites);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(n.useEffect)((function(){var t=function(){var t=Object(i.a)(l.a.mark((function t(r){var n,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://posts-pw2021.herokuapp.com/api/v1/post/one/".concat(r),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}});case 3:if(!(n=t.sent).ok){t.next=9;break}return t.next=7,n.json();case 7:return a=t.sent,t.abrupt("return",a);case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.error(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}(),r=d.map((function(e){return t(e)})),n=function(){var e=Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(r);case 2:t=e.sent,s(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n()}),[d]),Object(p.jsxs)("div",{className:"min-h-screen bg-dark-400",children:[Object(p.jsx)(G,{}),Object(p.jsx)("div",{className:"flex justify-center",children:Object(p.jsx)("div",{className:"w-11/12 mt-11",children:a.map((function(e){var t=[];return t.push(e._id),e?Object(p.jsx)(Q,{post:e,favs:t},e._id):Object(p.jsx)("h1",{children:"No hay posts"})}))})}),Object(p.jsx)("div",{className:"relative pt-1 bg-gradient-to-r from-aqua to-skyD"})]})},H=function(){var e=localStorage.getItem("token"),t=Object(n.useState)([]),r=Object(u.a)(t,2),a=r[0],s=r[1],c=Object(n.useState)([]),o=Object(u.a)(c,2),d=o[0],j=o[1],x=Object(n.useState)(0),b=Object(u.a)(x,2),f=b[0],h=b[1],m=Object(n.useState)(1),g=Object(u.a)(m,2),v=g[0],O=g[1];return Object(n.useEffect)((function(){var t=function(){var t=Object(i.a)(l.a.mark((function t(){var r,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://posts-pw2021.herokuapp.com/api/v1/post/owned?limit=15&page=".concat(f),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}});case 3:if(!(r=t.sent).ok){t.next=10;break}return t.next=7,r.json();case 7:n=t.sent,s(n.data),O(n.pages);case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.error(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}(),r=function(){var e=Object(i.a)(l.a.mark((function e(){var t,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://posts-pw2021.herokuapp.com/api/v1/post/fav",{method:"GET",headers:{Authorization:"Bearer "+localStorage.getItem("token")}});case 3:if(!(t=e.sent).ok){e.next=9;break}return e.next=7,t.json();case 7:r=e.sent,j(r.favorites);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();t(),r()}),[f]),f==v&&y.a.fire({title:"Has llegado al final de los post",icon:"warning",confirmButtonColor:"#3085d6",confirmButtonText:"Volver"}).then((function(e){e.isConfirmed&&h(f-1)})),console.log(f,v),f<0&&y.a.fire({title:"Parece que no hay posts por mostrar",icon:"warning",confirmButtonColor:"#3085d6",confirmButtonText:"Volver"}).then((function(e){e.isConfirmed&&h(f+1)})),Object(p.jsxs)("div",{className:"min-h-screen bg-dark-400",children:[Object(p.jsx)(G,{}),Object(p.jsx)("div",{className:"flex justify-center",children:Object(p.jsxs)("div",{className:"w-11/12 mt-11",children:[Object(p.jsxs)("div",{className:"flex flex-col gap-3 mb-5 lg:gap-0 lg:flex-row lg:justify-between",children:[Object(p.jsxs)("button",{onClick:function(){h(f-1)},className:"flex items-center justify-center px-4 py-1 mx-3 text-white transform bg-dark-700 x-2 hover:scale-105 hover:text-dark-700 hover:bg-white motion-reduce:transform-none rounded-2xl ",children:[Object(p.jsx)(P.e,{className:"inline "})," ",Object(p.jsx)("div",{children:"P\xe1gina anterior"})," "]}),Object(p.jsxs)("button",{onClick:function(){h(f+1)},className:"flex items-center justify-center px-4 py-1 mx-3 text-white transform bg-dark-700 x-2 hover:scale-105 hover:text-dark-700 hover:bg-white motion-reduce:transform-none rounded-2xl ",children:[" ",Object(p.jsx)("div",{children:"P\xe1gina siguiente"})," ",Object(p.jsx)(P.f,{className:"inline "})," "]})]}),a.length>0?a.map((function(e){return Object(p.jsx)(Q,{post:e,favs:d},e._id)})):null,Object(p.jsxs)("div",{className:"flex flex-col gap-3 mb-10 lg:gap-0 lg:flex-row lg:justify-between",children:[Object(p.jsxs)("button",{onClick:function(){h(f-1)},className:"flex items-center justify-center px-4 py-1 mx-3 text-white transform bg-dark-700 x-2 hover:scale-105 hover:text-dark-700 hover:bg-white motion-reduce:transform-none rounded-2xl ",children:[Object(p.jsx)(P.e,{className:"inline "})," ",Object(p.jsx)("div",{children:"P\xe1gina anterior"})," "]}),Object(p.jsxs)("button",{onClick:function(){h(f+1)},className:"flex items-center justify-center px-4 py-1 mx-3 text-white transform bg-dark-700 x-2 hover:scale-105 hover:text-dark-700 hover:bg-white motion-reduce:transform-none rounded-2xl ",children:[" ",Object(p.jsx)("div",{children:"P\xe1gina siguiente"})," ",Object(p.jsx)(P.f,{className:"inline "})," "]})]})]})}),Object(p.jsx)("div",{className:"relative pt-1 bg-gradient-to-r from-aqua to-skyD"})]})},V="https://posts-pw2021.herokuapp.com/api/v1",F=function(){var e=Object(v.g)(),t=JSON.parse(window.localStorage.getItem("post")),r=Object(n.useRef)(null),a=Object(n.useRef)(null),s=Object(n.useRef)(null);function c(){return(c=Object(i.a)(l.a.mark((function n(c){var o,i,u,d,j,x,b,p;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c.preventDefault(),o=r.current.value,i=a.current.value,u=s.current.value,d=JSON.parse(window.localStorage.getItem("title")),j=JSON.parse(window.localStorage.getItem("description")),x=JSON.parse(window.localStorage.getItem("image")),""===o&&(r.current.value=d),""===i&&(a.current.value=j),""===u&&(s.current.value=x),n.prev=10,n.next=13,C.a.put("".concat(V,"/post/update/").concat(t),{title:o,description:i,image:u},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}});case 13:b=n.sent,y.a.fire({icon:"success",title:"Actualizado",text:"Post Actualizado con exito"}),200===b.status&&(localStorage.getItem("token",b.data.token),e("/MyPosts")),n.next=22;break;case 18:n.prev=18,n.t0=n.catch(10),401===(p=n.t0.response).status?y.a.fire({icon:"error",title:"ERROR",text:"Debes ser admin para crear un post"}):404===p.status&&y.a.fire({icon:"error",title:"ERROR",text:"No se pudo crear el post"});case 22:case"end":return n.stop()}}),n,null,[[10,18]])})))).apply(this,arguments)}return Object(p.jsxs)("div",{className:"bg-dark-400",children:[Object(p.jsx)("div",{className:"relative pt-1 bg-gradient-to-r from-aqua to-skyD"}),Object(p.jsxs)("button",{onClick:function(t){t.preventDefault(),e("/CardContainer")},className:"px-4 py-2 mx-3 mt-6 text-white transform bg-dark-700 x-2 hover:scale-105 hover:text-dark-700 hover:bg-white motion-reduce:transform-none rounded-2xl ",children:[Object(p.jsx)(P.e,{className:"inline "})," ver los posts "]}),Object(p.jsx)("div",{className:"flex flex-col items-center min-h-screen pt-20 bg-dark-400",children:Object(p.jsx)("main",{children:Object(p.jsx)("div",{className:"w-full max-w-3xl p-2 rounded-md shadow-md border-1 md:p-2 bg-gradient-to-r from-aqua to-skyD text-bold hover:text-black",children:Object(p.jsxs)("form",{onSubmit:function(e){return c.apply(this,arguments)},className:"flex flex-col items-center justify-center gap-4 p-10 bg-skyL",children:[Object(p.jsx)("h2",{className:"mb-4 text-4xl font-black text-gray-800 font-heading",children:"Actualiza un POST"}),Object(p.jsxs)("div",{class:"flex",children:[Object(p.jsx)("span",{class:"text-lg  rounded-l px-4 py-2 bg-gray",children:Object(p.jsx)(I.b,{})}),Object(p.jsx)("input",{autocomplete:"false",className:"w-full px-4 py-2 rounded-r focus:outline-none focus:ring-2 focus:ring-aqua focus:border-transparent",type:"text",placeholder:"T\xedtulo",ref:r})]}),Object(p.jsxs)("div",{class:"flex",children:[Object(p.jsx)("span",{class:"text-lg   rounded-l px-4 py-2 bg-gray",children:Object(p.jsx)(w.b,{})}),Object(p.jsx)("input",{autocomplete:"false",className:"w-full px-4 py-2 rounded-r focus:outline-none focus:ring-2 focus:ring-aqua focus:border-transparent",type:"text",placeholder:"Descripci\xf3n",ref:a})]}),Object(p.jsxs)("div",{class:"flex",children:[Object(p.jsx)("span",{class:"text-lg  rounded-l px-4 py-2 bg-gray",children:Object(p.jsx)(L.b,{})}),Object(p.jsx)("input",{autocomplete:"false",className:"w-full px-4 py-2 rounded-r focus:outline-none focus:ring-2 focus:ring-aqua focus:border-transparent",type:"text",placeholder:"Url de la imagen",ref:s})]}),Object(p.jsx)("button",{className:"w-full px-4 py-2 mt-6 text-xl text-white uppercase transition duration-300 ease-in-out border rounded bg-gradient-to-r from-aqua to-skyD text-bold hover:text-black",children:"Actualizar"})]})})})})]})},M=function(){Object(v.g)();return Object(p.jsx)("button",{className:"flex items-center justify-center h-12 gap-3 hover:bg-dark-400 hover:text-white lg:w-1/4 lg:h-auto",children:"  Volver al Login"})};var W=function(){return Object(p.jsx)(A.a,{children:Object(p.jsxs)(v.d,{children:[Object(p.jsx)(v.b,{path:"/",element:Object(p.jsx)(v.a,{replace:!0,to:"/login"})}),Object(p.jsx)(v.b,{path:"/login",element:Object(p.jsx)(N,{})}),Object(p.jsx)(v.b,{path:"/Redirect",element:Object(p.jsx)(J,{})}),Object(p.jsx)(v.b,{path:"/CardContainer",element:Object(p.jsx)(X,{})}),Object(p.jsx)(v.b,{path:"/CreatePost",element:Object(p.jsx)(D,{})}),Object(p.jsx)(v.b,{path:"/MyFavorites",element:Object(p.jsx)(K,{})}),Object(p.jsx)(v.b,{path:"/MyPosts",element:Object(p.jsx)(H,{})}),Object(p.jsx)(v.b,{path:"/UpdatePost",element:Object(p.jsx)(F,{})}),Object(p.jsx)(v.b,{path:"/ErrorPage",element:Object(p.jsx)(M,{})}),Object(p.jsx)(v.b,{path:"/AdminMain",element:Object(p.jsx)(B,{role:"admin",children:Object(p.jsx)(X,{})})}),Object(p.jsx)(v.b,{path:"/UserMain",element:Object(p.jsx)(B,{role:"user",children:Object(p.jsx)(X,{})})}),Object(p.jsx)(v.b,{path:"/*",element:Object(p.jsx)(N,{})})]})})};c.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(m,{children:Object(p.jsx)(W,{})})}),document.getElementById("root"))}},[[71,1,2]]]);
//# sourceMappingURL=main.5e0d3a65.chunk.js.map